Stage 8: Purchasing Tokens
========================================

.. note::

  Time to start sending some transactions!  
  
  You have already sent a ``contract creation`` transaction via ``truffle migrate`` now it is time to send some ``calls``, or transactions
  that *call* functions of the contract. 

`Video Tutorial <https://drive.google.com/open?id=1qa87ghBevvIpNdYNohVfTiY8TXJjXLsV>`_

1. Add token amount to the state, line 21.

.. code-block:: javascript

  amount: 0,

2. Complete the function to buy tokens, sending a transaction to the token contract, line 82-84.
- From within the ``buy()`` function...

  .. code-block:: javascript

    const sender = this.web3.eth.accounts[this.state.defaultAccount];
    const transactionHash = await this.state.token.buy({ from: sender, value: amount });
    console.log(transactionHash);

  .. important:: 

    This must be added within the ``buy()`` function.
    
    i.e.

      .. code-block:: javascript

          async buy(amount) {
            const sender = this.web3.eth.accounts[this.state.defaultAccount];
            const transactionHash = await this.state.token.buy({ from: sender, value: amount });
            console.log(transactionHash);
          }

3. In the GUI buy tokens with several available accounts.

.. note::
  Note transaction hash in the developer console

  *Example transaction hash:* ``0x4b396191e87c31a02e80160cb6a2661da6086c073f6e91e9bd1f796e29b0c983``

4. Refresh the browser or select a different account and come back, and view the account's balance of shiny new tokens!

- |app05|

  .. |app05| raw:: html

    <a href="https://github.com/Blockchain-Learning-Group/course-resources/blob/master/wallet-template/dev-stages/App.5.js" target="_blank">Complete App.js solution may be found here</a>